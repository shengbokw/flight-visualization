## 数据可视化: 美国航班信息分布


### 总结

针对美国1998至2012年的航班信息制作可视化图，主要包含航班数量及时间维度的信息。

### 设计

#### 数据清洗及探索 (R)

数据来源于[RITA](http://stat-computing.org/dataexpo/2009/the-data.html)，由于数据仅提供至2012年，所以各个州的航班量随时间变化的趋势仅能描绘至2012年。提供的数据量比较全，有时间信息，航班的起飞到达城市，航班的预计起飞到达时间及实际起飞到达时间，航班里程数等信息，这里我仅对各个航班的始发城市航班量进行统计及绘制，并将城市（机场CODE）对应的航班量累积进对应的州，最终获得美国各个州的当年航班始发总量，保存至csv文件，用来动态展现航班量变化情况。相关的数据处理过程见：`./data/flight_counts.rmd`，将各个年份的汇总数据计算完成后，将数据导入到本地的数据库里进行了汇总，`./data/flight_counts.sql`

#### 数据可视化 (d3.js)

由于我想要展示的是美国各州始发航班量随年份增加变化图，所以需要考虑到两个方面的内容。其一：各个州航班量多少的区分，这里使用同一种颜色的不同深度信息来区分各个州的情况，颜色越深表明该州当年航班量越多；其二：航班量数据随时间变化，这一点采用的是每隔3s更新页面显示后一个年份数据的方式，最初的版本为`index-initial.html` ，对应的图形展示为：

![flight-initial](./flights-initial.png)


### 反馈

我将该数据背景及可视化效果让三位朋友看，并结合该可视化结果讲解数据，得到如下反馈：

#### 评审 #1

> 航班数据随时间变化刷新页面的做法有点突兀，看起来一闪一闪的，效果不好，可以考虑增加下拉框进行选择

#### 评审 #2

> 左下角显示各个州的航班数据量时信息不够明确，需要询问才能知道该颜色条的意义，且数字太大，不知是否可以取个均值或者比率，另外每隔一段时间就刷新页面的做法不好

#### 评审 #3

> 最直接的感受是页面的刷新，不够流畅，且看不出刷新之后的数据代表的年份，需要将鼠标放置到相应位置才能看出来，不够智能

### 改版

根据朋友的反馈信息，我将可视化进行了如下的改版:

- 将之前的每隔3s进行一次页面刷新来更新后一年的数据方式改成可选年份

得到最终结果如下:

![flight-final](./flights-final.png)


### 参考资料

- [Data Visualization and D3.js (Udacity)](https://www.udacity.com/course/viewer#!/c-ud507-nd)
- [d3.geomap](http://d3-geomap.github.io)
- [Slider for Bootstrap](http://seiyria.com/bootstrap-slider/)

### 数据

- `./data/flights.csv`: 将从RITA上下载下来的2000年至2008年的数据经过处理后得到的各个州当年始发的航班量。
